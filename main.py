import logging
from aiogram import Bot, Dispatcher
from aiogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, CallbackQuery
from aiogram.filters import Command
from aiogram import F
from aiogram.client.bot import DefaultBotProperties
import asyncio

# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
API_TOKEN = '7712066245:AAHHkKuTRWW9VFk3wl6gxkBOWi679wfBg5c'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)

# –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=API_TOKEN, default=DefaultBotProperties(parse_mode="HTML"))
dp = Dispatcher()

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è)
user_states = {}

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@dp.message(Command("start"))
async def send_welcome(message: Message):
    # –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    text = ("<b>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é!</b> üñê\n\n"
            "–¢—ã –ø–æ–ø–∞–ª –≤ —Å–∞–º—ã–π –º–æ—â–Ω—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º–µ.\n\n"
            "–õ–∏—á–Ω–æ —è –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–∏–º –∑–Ω–∞–Ω–∏—è–º, –∑–∞–ª–∏–ª <b>–±–æ–ª—å—à–µ</b> 20 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ä—É–±–ª–µ–π —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞.\n\n"
            "‚û°Ô∏è<b>–°–µ–π—á–∞—Å —Ä–∞—Å—Å–∫–∞–∂—É</b>, –∫–∞–∫ —Ç–µ–±–µ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º–µ 150–∫+ —Å –Ω—É–ª—è –∑–∞ –º–µ—Å—è—Ü –∏ —É–∑–Ω–∞—Ç—å, –∫–∞–∫ —Ç–µ–±–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –µ—â—ë –±–æ–ª—å—à–µ.\n\n"
            "<b>–ü–æ—ç—Ç–æ–º—É, –¥–∞–≤–∞–π –¥–æ–≥–æ–≤–æ—Ä–∏–º—Å—è:</b>\n\n"
            "–¢—ã —Ç—â–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∞–µ—à—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –Ω–µ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–µ—Ä—å—ë–∑–Ω–æ.\n\n"
            "<b>–ê –≤ –∫–æ–Ω—Ü–µ</b>, –ø–æ–ª—É—á–∞–µ—à—å —Ü–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä–æ–µ—Ç –≤—Å–µ —Ç–≤–æ–∏ –∑–∞–ø—Ä–æ—Å—ã.")

    # –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É
    photo_url = 'https://postimg.cc/hz6Gy2KN'  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É

    # –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(text="–ü–û–ì–ù–ê–õ–ò", callback_data="start_action")]]
    )

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ –∏ —Ç–µ–∫—Å—Ç
    await bot.send_photo(chat_id=message.chat.id, photo=photo_url, caption=text, reply_markup=keyboard)


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫—É –ü–û–ì–ù–ê–õ–ò
@dp.callback_query(lambda callback_query: callback_query.data == "start_action")
async def handle_start_action(callback_query: CallbackQuery):
    await bot.answer_callback_query(callback_query.id)  # –û—Ç–≤–µ—Ç –Ω–∞ callback
    text = ("<b>–ù–µ–¥–∞–≤–Ω–æ —è –æ–∫–æ–Ω—á–∏–ª –∑–∞–∫—É–ø –∫–∞–Ω–∞–ª—É –≤ —Ç–µ–º–∞—Ç–∏–∫–µ –ª–∞–π—Ñ—Ö–∞–∫–æ–≤.</b> \n\n"
            "–ü—Ä–∏–≤—ë–ª –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –ø–æ 10—Ä –∏ –∫–ª–∏–µ–Ω—Ç –æ—Å—Ç–∞–ª—Å—è –¥–æ–≤–æ–ª—å–Ω—ã–º. –¢–µ–ø–µ—Ä—å —Å —ç—Ç–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º —è —Ä–∞–±–æ—Ç–∞—é –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—Å–Ω–æ–≤–µ. \n\n"
            "<b>–ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å:</b>\n\n"
            "–ö–∞–∫ –¥—É–º–∞–µ—à—å, –∫–∞–∫–æ–π –±—é–¥–∂–µ—Ç –∑–∞–∫—É–ø–∞?")

    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[
            [InlineKeyboardButton(text="100-200–∫", callback_data="wrong_answer")],
            [InlineKeyboardButton(text="200-500–∫", callback_data="wrong_answer")],
            [InlineKeyboardButton(text="500-1–º–ª–Ω", callback_data="wrong_answer")],
            [InlineKeyboardButton(text="2–º–ª–Ω", callback_data="correct_answer")]
        ]
    )

    await bot.send_message(chat_id=callback_query.message.chat.id, text=text, reply_markup=keyboard)


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
@dp.callback_query(lambda callback_query: callback_query.data == "wrong_answer")
async def handle_wrong_answer(callback_query: CallbackQuery):
    await bot.answer_callback_query(callback_query.id)
    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(text="–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑", callback_data="start_action")]]
    )
    await bot.send_message(chat_id=callback_query.message.chat.id, text="‚ùå–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ", reply_markup=keyboard)


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
@dp.callback_query(lambda callback_query: callback_query.data == "correct_answer")
async def handle_correct_answer(callback_query: CallbackQuery):
    await bot.answer_callback_query(callback_query.id)

    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫–æ–¥ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–∫–∞
    # –°–Ω–∞—á–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç..." —Å –∫–Ω–æ–ø–∫–æ–π "–≥–æ—Ç–æ–≤"
    text_new = ("‚úÖ<b> –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: 2.000.000—Ä</b>\n\n"
                "–Ø —É–∂–µ –Ω–µ –ø–µ—Ä–≤—ã–π –≥–æ–¥ –≤ –∑–∞–∫—É–ø–∞—Ö –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ —Ç—É—Ç –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ 150–∫+\n\n"
                "–î–æ–∫–∞–∑–∞–ª —è —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–æ–µ–º –ø—Ä–∏–º–µ—Ä–µ, –Ω–æ –∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–æ–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞—Å—Ç–∏–ª —Å –Ω—É–ª—è.\n\n"
                "<b>–ù—É —á—Ç–æ, —Ç—ã –≥–æ—Ç–æ–≤ –æ–∫—É–Ω—É—Ç—å—Å—è –≤ –º–∏—Ä —Ç–µ–ª–µ–≥—Ä–∞–º–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫?</b>")
    keyboard_new = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(text="–≥–æ—Ç–æ–≤", callback_data="ready_for_info")]]
    )
    await bot.send_message(chat_id=callback_query.message.chat.id, text=text_new, reply_markup=keyboard_new, disable_web_page_preview=True)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—à–µ–ª –∫–≤–∏–∑, –Ω–æ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤ –∫ —É—Ä–æ–∫—É.
    user_states[callback_query.from_user.id] = {"quiz_passed": True, "ready_for_lesson": False}

    # –ù–∏–∂–µ - —Å—Ç–∞—Ä—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏–∑–º–µ–Ω—è–µ–º, –Ω–æ —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    # –°—Ç–∞—Ä—ã–π –∫–æ–¥ —É—Ä–æ–∫–∞ (–Ω–µ –º–µ–Ω—è–µ–º, –Ω–µ —É–¥–∞–ª—è–µ–º):
    text = ("üí∏<b>–ü–ï–†–í–´–ô –£–†–û–ö [1/5]:</b> –ö—Ç–æ —Ç–∞–∫–æ–π –∑–∞–∫—É–ø—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã? (–í–≤–µ–¥–µ–Ω–∏–µ)\n\n"
            "–£–∑–Ω–∞–µ—à—å, –∫—Ç–æ —Ç–∞–∫–æ–π –∑–∞–∫—É–ø—â–∏–∫, –∫–∞–∫ –æ–Ω –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –∫–∞–∫–∏–µ –Ω—É–∂–Ω—ã –Ω–∞–≤—ã–∫–∏.\n\n"
            "<a href='https://vc.ru/1714540'><b>–ü–†–û–ß–ò–¢–ê–¢–¨</b></a> (2 –º–∏–Ω—É—Ç—ã)")

    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(text="–ü—Ä–æ—á–∏—Ç–∞–ª", callback_data="lesson_2")]]
    )

    # –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è, —á—Ç–æ–±—ã —É—Ä–æ–∫ –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–î–ê!"
    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤ –∫ —É—Ä–æ–∫—É, –ø—Ä–æ—Å—Ç–æ –≤—ã–π–¥–µ–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—è —É—Ä–æ–∫.
    if user_states.get(callback_query.from_user.id, {}).get("ready_for_lesson") is True:
        await bot.send_message(chat_id=callback_query.message.chat.id, text=text, reply_markup=keyboard, disable_web_page_preview=True)
    else:
        # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤, –º—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É—Ä–æ–∫ –∑–¥–µ—Å—å.
        # –°—Ç–∞—Ä—ã–π –∫–æ–¥ –Ω–µ —É–¥–∞–ª–µ–Ω, –ª–∏—à—å –¥–æ–ø–æ–ª–Ω–µ–Ω —É—Å–ª–æ–≤–∏–µ–º.
        pass


# –•–µ–Ω–¥–ª–µ—Ä –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–≥–æ—Ç–æ–≤" –ø–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
@dp.callback_query(lambda c: c.data == "ready_for_info")
async def handle_ready_for_info(callback_query: CallbackQuery):
    await bot.answer_callback_query(callback_query.id)
    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
    text = ("<b>–ü—Ä–µ–∂–¥–µ, —á–µ–º —è –≤—ã—à–ª—é —Ç–µ–±–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫ ‚Äî –º–Ω–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–±–µ.</b>\n\n"
            "–ß—Ç–æ–±—ã –ø–æ–º–æ—á—å —á–µ–ª–æ–≤–µ–∫—É —Å—Ç–∞—Ä—Ç–∞–Ω—É—Ç—å –≤ –∑–∞–∫—É–ø–∞—Ö, —è –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å —Å —á–µ–º –æ–Ω –ø—Ä–∏—à–µ–ª.\n\n"
            "–û—Ç–≤–µ—á–∞—é –ª–∏—á–Ω–æ, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –í—Å–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ.\n\n"
            "<b>–ü–æ—ç—Ç–æ–º—É: –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ç—ã –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∏–∂–µ</b>‚¨áÔ∏è\n\n"
            "1. –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç? –°–∫–æ–ª—å–∫–æ –ª–µ—Ç? –í –∫–∞–∫–æ–º –≥–æ—Ä–æ–¥–µ –∂–∏–≤–µ—à—å?\n\n"
            "2. –ß–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è? –†–∞–±–æ—Ç–∞–µ—à—å/—É—á–∏—à—å—Å—è, —Ä–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ\n\n"
            "3. –°–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—à—å —Å–µ–π—á–∞—Å? –°–∫–æ–ª—å–∫–æ —Ö–æ—Ç–µ–ª–∞ –±—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å?\n\n"
            "4. –ë—ã–ª –ª–∏ –æ–ø—ã—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π –±–∏–∑–Ω–µ—Å? –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ö.\n\n"
            "<b>–û—Ç–≤–µ—Ç—ã –ø—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –≤ –ª–∏—á–∫—É:</b> @Arti_Guru")
    await bot.send_message(chat_id=callback_query.message.chat.id, text=text, disable_web_page_preview=True)

    # –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥
    await asyncio.sleep(300)

    # –ü–æ—Å–ª–µ 5 —Å–µ–∫—É–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∏ –∫–Ω–æ–ø–∫–æ–π "–î–ê!"
    photo_url = 'https://postimg.cc/cgg9YBTF'  # –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –Ω—É–∂–Ω—É—é
    text2 = "–û—Ç–≤–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã? –ú–æ–∂–µ–º —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å?"
    keyboard_yes = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(text="–î–ê!", callback_data="start_lessons")]]
    )
    await bot.send_photo(chat_id=callback_query.message.chat.id, photo=photo_url, caption=text2, reply_markup=keyboard_yes)


# –•–µ–Ω–¥–ª–µ—Ä –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–î–ê!" –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ —É—Ä–æ–∫–∞
@dp.callback_query(lambda c: c.data == "start_lessons")
async def handle_start_lessons(callback_query: CallbackQuery):
    await bot.answer_callback_query(callback_query.id)
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –≥–æ—Ç–æ–≤ –∫ —É—Ä–æ–∫—É
    if callback_query.from_user.id in user_states:
        user_states[callback_query.from_user.id]["ready_for_lesson"] = True

    # –¢–µ–ø–µ—Ä—å –º—ã –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞–µ–º –ª–æ–≥–∏–∫—É –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –µ—â–µ —Ä–∞–∑, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫.
    # –ü–æ —Å—É—Ç–∏, –ø–æ–≤—Ç–æ—Ä—è–µ–º –∫–æ–¥ handle_correct_answer, –Ω–æ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "–≥–æ—Ç–æ–≤".
    # –í handle_correct_answer –∫–æ–¥ —É–∂–µ –µ—Å—Ç—å (–º—ã –µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º), –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º —Ç—É –∂–µ –ª–æ–≥–∏–∫—É –∑–∞–Ω–æ–≤–æ.
    # –ù–æ —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å, –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑ —Å–∞–º —Ö–µ–Ω–¥–ª–µ—Ä –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –∫–æ–¥.
    # –ú—ã –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É—Ä–æ–∫–∞ –∑–¥–µ—Å—å, —Ç–∞–∫ –∫–∞–∫ –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ä—ã–π —Ö–µ–Ω–¥–ª–µ—Ä –Ω–µ–ª—å–∑—è.

    text = ("üí∏<b>–ü–ï–†–í–´–ô –£–†–û–ö [1/5]</b>: –ö—Ç–æ —Ç–∞–∫–æ–π –∑–∞–∫—É–ø—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã? (–í–≤–µ–¥–µ–Ω–∏–µ)\n\n"
            "–£–∑–Ω–∞–µ—à—å, –∫—Ç–æ —Ç–∞–∫–æ–π –∑–∞–∫—É–ø—â–∏–∫, –∫–∞–∫ –æ–Ω –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –∫–∞–∫–∏–µ –Ω—É–∂–Ω—ã –Ω–∞–≤—ã–∫–∏.\n\n"
            "<a href='https://vc.ru/1714540'><b>–ü–†–û–ß–ò–¢–ê–¢–¨</b></a> (2 –º–∏–Ω—É—Ç—ã)")

    keyboard = InlineKeyboardMarkup(
        inline_keyboard=[[InlineKeyboardButton(text="–ü—Ä–æ—á–∏—Ç–∞–ª", callback_data="lesson_2")]]
    )

    await bot.send_message(chat_id=callback_query.message.chat.id, text=text, reply_markup=keyboard, disable_web_page_preview=True)


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ—á–∏—Ç–∞–ª" –¥–ª—è —É—Ä–æ–∫–æ–≤
@dp.callback_query(lambda callback_query: callback_query.data.startswith("lesson_"))
async def handle_lessons(callback_query: CallbackQuery):
    lesson_data = {
        "lesson_2": {
            "text": ("üí∏<b>–í–¢–û–†–û–ô –£–†–û–ö [2/5]:</b> –ö–∞–∫ –ø–æ—Å—Ç—è–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤? 2 —Å–ø–æ—Å–æ–±–∞.\n\n"
                     "–£–∑–Ω–∞–µ—à—å, –∫–∞–∫ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∏—Ö –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –¥–æ–ª–≥–æ—Å—Ä–æ–∫, –ø–æ—Å—Ç–æ—è–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—è –±—é–¥–∂–µ—Ç.\n\n"
                     "<a href='https://vc.ru/1714604'><b>–ü–†–û–ß–ò–¢–ê–¢–¨</b></a> (3 –º–∏–Ω—É—Ç—ã)"),
            "callback": "lesson_3"
        },
        "lesson_3": {
            "text": ("üí∏<b>–¢–†–ï–¢–ò–ô –£–†–û–ö [3/5]:</b> –ö–∞–∫ –∑–∞–∫—É–ø–∞—Ç—å –Ω–∏–∂–µ —Ä—ã–Ω–∫–∞ –∏ –¥–µ–ª–∞—Ç—å —Å–≤–æ—é —É—Å–ª—É–≥—É –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ?\n\n"
                     "–£–∑–Ω–∞–µ—à—å, –∫–∞–∫ –≤–µ—Å—Ç–∏ —Ö–æ—Ä–æ—à–∏–π –ø–¥–ø –∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–∏—è—Ç–Ω–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ –æ —Å–µ–±–µ.\n\n"
                     "<a href='https://vc.ru/1714851'><b>–ü–†–û–ß–ò–¢–ê–¢–¨</b></a> (2 –º–∏–Ω—É—Ç—ã)"),
            "callback": "lesson_4"
        },
        "lesson_4": {
            "text": ("üí∏<b>–ß–ï–¢–í–Å–†–¢–´–ô –£–†–û–ö [4/5]:</b> 2 —ç—Ç–∞–ø–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –¥–æ 300 —Ç—ã—Å—è—á –¥–æ—Ö–æ–¥–∞.\n\n"
                     "–£–∑–Ω–∞–µ—à—å, –∫–∞–∫ —Å –¥–æ—Ö–æ–¥–∞ 70-100–∫ –≤—ã–π—Ç–∏ –Ω–∞ 300–∫+ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏—Ä–æ–≤–∞—Ç—å.\n\n"
                     "<a href='https://vc.ru/1714905'><b>–ü–†–û–ß–ò–¢–ê–¢–¨</b></a> (2 –º–∏–Ω—É—Ç—ã)"),
            "callback": "lesson_5"
        },
        "lesson_5": {
            "text": ("üí∏<b>–ü–Ø–¢–´–ô –£–†–û–ö [5/5]:</b> –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–∞–∑–±–æ—Ä.\n\n"
                     "–ü—Ä–∏–π—Ç–∏ –Ω–∞ —Ä–∞–∑–±–æ—Ä –∫–æ –º–Ω–µ - —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å –¥–µ–ª–∞—Ç—å –¥–µ–Ω—å–≥–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ.\n\n"
                     "‚û°Ô∏è<b>–ï—Å–ª–∏ —Ç—ã –Ω–æ–≤–∏—á–æ–∫ —Å –Ω–µ–±–æ–ª—å—à–∏–º –¥–æ—Ö–æ–¥–æ–º, —Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ–¥ —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é, –º—ã —Ä–∞—Å–ø–∏—à–µ–º –ø–ª–∞–Ω –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ—Ä–≤—ã–µ 150–∫+</b>\n\n"
                     "‚û°Ô∏è<b>–ï—Å–ª–∏ —Ç—ã —É–∂–µ –¥–µ–ª–∞–µ—à—å 100-200–∫, —Ç–æ –º—ã —Ä–∞—Å–ø–∏—à–µ–º –ø–ª–∞–Ω, –∫–∞–∫ —Ç–µ–±–µ –¥–µ–ª–∞—Ç—å –≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ.</b>\n\n"
                     "<b>–†–∞–∑–±–æ—Ä</b> ‚Äì —ç—Ç–æ –æ–∫–æ–ª–æ 40 –º–∏–Ω—É—Ç –º–æ–µ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∏ –≤–æ–≤–ª–µ—á–µ–Ω–∏—è –≤ —Ç–µ–±—è.\n\n"
                     "<b>–ß–¢–û –ë–£–î–ï–¢ –ù–ê –†–ê–ó–ë–û–†–ï?</b>\n\n"
                     "‚Äî –∫–∞–∫ —Ç–µ–±–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –±—é–¥–∂–µ—Ç–æ–º 300–∫+ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é.\n\n"
                     "‚Äî –¥–µ–ª—é—Å—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ —Å–≤—è–∑–∫–∞–º–∏ –¥–ª—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∑–∞–∫—É–ø–∞—Ö.\n\n"
                     "‚Äî –∫–∞–∫ —Ç–µ–±–µ —Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –≤ —Ç–≥.\n\n"
                     "‚Äî –∫–∞–∫ –∫–∞—á–∞—Ç—å –º–µ–¥–∏–π–∫—É –∏ —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ–ø—É—Ç–∞—Ü–∏—é.\n\n"
                     "‚Äî –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É, —á—Ç–æ–±—ã –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏—è—Ö, –ø–æ–ª—É—á–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.\n\n"
                     "‚Äî —Å—Ç—Ä–æ–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –≤—ã—Ö–æ–¥–∞ –Ω–∞ –¥–æ—Ö–æ–¥, –∏–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–±—è.\n\n"
                     "<b>–ü–∏—à–∏ —Å–ª–æ–≤–æ</b> \"—Ä–∞–∑–±–æ—Ä\" –º–Ω–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é: @Arti_Guru"),
            "callback": None
        }
    }

    lesson = lesson_data.get(callback_query.data)
    if lesson:
        keyboard = None
        if lesson["callback"]:
            keyboard = InlineKeyboardMarkup(
                inline_keyboard=[[InlineKeyboardButton(text="–ü—Ä–æ—á–∏—Ç–∞–ª", callback_data=lesson["callback"])]])

        await bot.send_message(chat_id=callback_query.message.chat.id, text=lesson["text"], reply_markup=keyboard, disable_web_page_preview=True)

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
async def main():
    await dp.start_polling(bot)

if __name__ == '__main__':
    asyncio.run(main())
